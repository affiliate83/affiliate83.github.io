<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>실시간 접수 연출</title>
  <style>
  /* 바 높이(티스토리 스페이서와 같은 값으로 쓰면 딱 맞아요) */
  :root { --bar-h: 64px; } /* 60~68px 사이 취향대로 */

  /* 전체 배경을 투명으로: iFrame 뒤의 본문이 비치게 */
  html, body {
    margin: 0; padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Noto Sans KR", system-ui, sans-serif;
    color: #111;
    background: transparent !important; /* ★ 중요 */
  }

  /* 상단 고정바 */
  #apply-fixedbar{
    position: fixed; inset: 0 0 auto 0; height: var(--bar-h);
    background:#0f2342; color:#fff; z-index: 99999;
    box-shadow:0 8px 20px rgba(0,0,0,.25);
  }
  #apply-fixedbar .wrap{ max-width:1100px; margin:0 auto; padding:10px 14px; }
  #apply-fixedbar .row{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
  #apply-gaugeTrack{ margin-top:8px; height:8px; border-radius:6px; background:#2a3b5b; overflow:hidden; }
  #apply-gaugeBar{ width:0%; height:100%; border-radius:6px; background:#22c55e; transition:width .7s ease, background-color .3s ease; }

  /* 본문(리스트) — list 모드일 때만 보임(JS에서 제어) */
  main{ max-width:900px; margin: calc(var(--bar-h) + 16px) auto 24px; padding:0 12px; }
  h2{ margin:28px 0 12px; font-size:22px; }
  .note{ margin-top:8px; color:#666; font-size:13px; }

  /* 토스트: 바 바로 아래에서 떠서 '겹쳐' 보이도록 고정 */
  #apply-toastwrap{
    position: fixed;
    right: 12px;
    top: calc(var(--bar-h) + 8px); /* 바 바로 아래 */
    z-index: 100000;
    display:flex; flex-direction:column; gap:8px;
    pointer-events: none;  /* 아래 요소 클릭 방해 안 하도록 */
  }
  .apply-toast{
    background:#fff; border:1px solid #eaeaea; border-radius:12px;
    box-shadow:0 12px 28px rgba(0,0,0,.12);
    padding:12px 14px; max-width:80vw; min-width:220px;
    font-size:14px; color:#111; transform:translateY(-10px); opacity:0;
    transition:.25s ease;
    pointer-events:auto; /* 토스트 자체는 클릭 가능하게 */
  }

  /* 표 (list 모드에서만 보임) */
  #apply-tablewrap{ overflow:auto; border:1px solid #eee; border-radius:12px; }
  #apply-table{ width:100%; border-collapse:collapse; font-size:15px; }
  #apply-table thead tr{ background:#fafafa; }
  #apply-table th, #apply-table td{ padding:12px; border-bottom:1px solid #f0f0f0; text-align:center; }

  @media (max-width:480px){ :root{ --bar-h: 60px; } }
</style>

</head>
<body>
  <!-- 상단바(모드: bar에서만 보임) -->
  <div id="apply-fixedbar">
    <div class="wrap">
      <div class="row">
        <div style="font-weight:700;">오늘 마감까지 <span id="apply-countdown">00:00:00</span></div>
        <div style="opacity:.95;">· 예상 잔여 <strong id="apply-quota">12</strong>명</div>
      </div>
      <div id="apply-gaugeTrack"><div id="apply-gaugeBar"></div></div>
    </div>
  </div>

  <!-- 토스트(모드: bar에서만 보임) -->
  <div id="apply-toastwrap"></div>

  <!-- 리스트(모드: list에서만 보임) -->
  <main id="apply-list">
    <h2>최근 등록 현황 <small style="font-size:12px;color:#777;">(실시간 적용)</small></h2>
    <div id="apply-tablewrap">
      <table id="apply-table">
        <thead><tr><th>이름</th><th>나이</th><th>등록 시각</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="note">※ 본 화면의 접수 내역은 <b>실시간 적용</b>되고 있습니다.</div>
  </main>

  <script src="./apply.js" defer></script>
</body>
</html>
